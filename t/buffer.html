<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0,user-scalable=no"">
  <title>Optera Pomp Systeem Calculator</title>
  <link rel="stylesheet" href="buffer.css"> 
  <link rel="icon" href="/images/optera logo witte achtergrond.ico" sizes="any">
  <link rel="icon" href="/images/optera logo witte achtergrond.svg" type="image/svg+xml">
</head>

<body>
  <div class="container">
    <img src="/images/optera logo witte achtergrond.svg" alt="Optera logo without circle">

    <header class="card-header">
      <h1>Pomp Buffer Calculator</h1>
    </header>
    <div class="alert">
      <div class="alert-header" onclick="toggleReference()">
        <h2>Referenties</h2>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
          stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down">
          <polyline points="6 9 12 15 18 9"></polyline>
        </svg>
      </div>
      <div class="alert-content">
          <h3>What is this program calculating?</h3>
          <ul>
              <li>
                  <strong>Total Surface Area:</strong>
                  The combined surface area of the catchment zones (<code>C10</code>, <code>C09</code>, <code>C05</code>, and <code>C03</code>).
              </li>
              <li>
                  <strong>Effective Surface Area:</strong>
                  Adjusted surface area accounting for runoff coefficients:
                  <ul>
                      <li><code>C10</code>: 100% of the area contributes to runoff.</li>
                      <li><code>C09</code>: 90% of the area contributes to runoff.</li>
                      <li><code>C05</code>: 50% of the area contributes to runoff.</li>
                      <li><code>C03</code>: 30% of the area contributes to runoff.</li>
                  </ul>
              </li>
              <li>
                  <strong>Rainfall:</strong>
                  The rainfall intensity data is taken from official or calculated datasets based on return intervals (e.g., 10-year intensity values). This program uses linear interpolation to estimate rainfall at different time intervals.
              </li>
              <li>
                  <strong>Buffer Volume:</strong>
                  The required storage capacity (buffer) to prevent flooding is calculated as:
                  <ul>
                      <li>
                          Rainfall volume = <code>(rainfall in m) * (effective surface area in m²)</code>.
                      </li>
                      <li>
                          Pumped volume = <code>(pump capacity in m³/h) * (time in hours)</code>.
                      </li>
                      <li>
                          Buffer required = <code>Rainfall volume - Pumped volume</code>.
                      </li>
                  </ul>
              </li>
              <li>
                  <strong>Pump Capacity:</strong>
                  The combined pumping capacity of all pumps is used to calculate how much water can be removed from the buffer over time.
              </li>
              <li>
                  <strong>Maximum Buffer Volume:</strong>
                  The largest buffer size needed during the calculation period, considering rainfall and pumping capacity.
              </li>
              <li>
                  <strong>Time to Empty Buffer:</strong>
                  The time required to completely empty the buffer, assuming no additional rainfall and that the pumps are operating continuously.
              </li>
              <li>
                  <strong>System Adequacy:</strong>
                  Determines whether the system is sufficient based on whether the buffer can be emptied within 24 hours.
              </li>
          </ul>
          <h3>Values Used</h3>
          <ul>
              <li><strong>Surface Area (C10, C09, C05, C03):</strong> User-provided.</li>
              <li><strong>Pump Capacity:</strong> User-provided in m³/h.</li>
              <li><strong>Number of Pumps:</strong> User-provided.</li>
              <li><strong>Rainfall Data:</strong> Predefined dataset with interpolation for custom intervals.</li>
          </ul>
      </div>
    </div>

    <div class="input-section">
      <div class="input-group">
        <label for="oppervlakC10">Dak Oppervlak C = 1</label>
        <div class="input-wrapper">
          <input type="number" id="oppervlakC10" name="oppervlakC10" value="0" step="100" data-step="100">
          <button class="btn-minus" data-step="100">-</button>
          <button class="btn-plus" data-step="100">+</button>
        </div>
      </div>
      <div class="input-group">
        <label for="oppervlakC09">Ondoorlaatbaar Oppervlak C = 0.9</label>
        <div class="input-wrapper">
          <input type="number" id="oppervlakC09" name="oppervlakC09" value="500" step="100" data-step="100">
          <button class="btn-minus" data-step="100">-</button>
          <button class="btn-plus" data-step="100">+</button>
        </div>
      </div>
      <div class="input-group">
        <label for="oppervlakC05">Semi Permeabel Oppervlak C = 0.5</label>
        <div class="input-wrapper">
          <input type="number" id="oppervlakC05" name="oppervlakC05" step="100" value="0" data-step="100">
          <button class="btn-minus" data-step="100">-</button>
          <button class="btn-plus" data-step="100">+</button>
        </div>
      </div>
      <div class="input-group">
        <label for="oppervlakC03">Doorlaatbaar Oppervlak C = 0.3</label>
        <div class="input-wrapper">
          <input type="number" id="oppervlakC03" name="oppervlakC03" step="100" value="0" data-step="100">
          <button class="btn-minus" data-step="100">-</button>
          <button class="btn-plus" data-step="100">+</button>
        </div>
      </div>
      <div class="input-group">
        <label for="pumpCapacity">Pump Capacity (m³/hour)</label>
        <div class="input-wrapper">
          <input type="number" id="pumpCapacity" name="pumpCapacity" value="7.2" data-step="0.1">
          <button class="btn-minus" data-step="0.1">-</button>
          <button class="btn-plus" data-step="0.1">+</button>
        </div>
      </div>
      <div class="input-group">
        <label for="numberOfPumps">Number of Pumps</label>
        <div class="input-wrapper">
          <input type="number" id="numberOfPumps" name="numberOfPumps" min="1" max="3" value="1" data-step="1">
          <button class="btn-minus" data-step="1">-</button>
          <button class="btn-plus" data-step="1">+</button>
        </div>
      </div>
    </div>

    <div class="results-wrapper">
      <div class="results-section">
        <h2>Calculations</h2>
        <div id="calculations"></div>
      </div>
      <div class="charts-wrapper">
        <div class="chart-section">
          <canvas id="waterLevelChart"></canvas>
        </div>
      </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="buffer.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation"></script>